---
phase: 02-interactive-content
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - frontend/src/components/video/VideoBookmarks.tsx
  - frontend/src/components/video/BookmarkButton.tsx
  - frontend/src/components/video/index.ts
autonomous: true

must_haves:
  truths:
    - "User can add a bookmark at current video position"
    - "User can see list of bookmarks for the video"
    - "User can click bookmark to jump to that position"
    - "Bookmarks persist across sessions"
  artifacts:
    - path: "frontend/src/components/video/VideoBookmarks.tsx"
      provides: "Bookmark list display and navigation"
      min_lines: 50
    - path: "frontend/src/components/video/BookmarkButton.tsx"
      provides: "Add bookmark action button"
      min_lines: 30
  key_links:
    - from: "VideoBookmarks.tsx"
      to: "videoStore"
      via: "useVideoStore for bookmark data"
      pattern: "useVideoStore"
    - from: "BookmarkButton.tsx"
      to: "videoStore.addBookmark"
      via: "bookmark creation"
      pattern: "addBookmark"
---

<objective>
Add bookmark functionality to interactive video player.

Purpose: Let users mark important moments in videos for quick reference and review.
Output: VideoBookmarks component and BookmarkButton for adding/viewing/navigating bookmarks.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Patterns to follow
@.planning/codebase/CONVENTIONS.md

# Video types and store (from 02-01, will exist when this runs)
# Note: Both plans are Wave 1 but work on different files
# Types are created by 02-01, this plan only creates bookmark UI components
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create BookmarkButton component</name>
  <files>frontend/src/components/video/BookmarkButton.tsx</files>
  <action>
    Create `frontend/src/components/video/BookmarkButton.tsx`:

    Props:
    - videoId: string
    - currentTime: number
    - onBookmarkAdded?: () => void

    Behavior:
    - Clicking adds bookmark at currentTime with auto-generated label ("Bookmark at mm:ss")
    - Show brief toast/notification on add (or change button state temporarily)
    - Use Bookmark icon from lucide-react (BookmarkPlus when adding)
    - Style as a subtle icon button, matches other video controls
    - Hover tooltip: "Add bookmark"

    Implementation:
    - Import videoStore and call addBookmark action
    - Generate unique ID using crypto.randomUUID() or Date.now()
    - Format timestamp for label using utility function

    Follow button patterns from VideoControls.tsx.
  </action>
  <verify>TypeScript compiles, button renders correctly</verify>
  <done>BookmarkButton adds bookmarks to videoStore when clicked</done>
</task>

<task type="auto">
  <name>Task 2: Create VideoBookmarks list component</name>
  <files>frontend/src/components/video/VideoBookmarks.tsx</files>
  <action>
    Create `frontend/src/components/video/VideoBookmarks.tsx`:

    Props:
    - videoId: string
    - onBookmarkClick: (timestamp: number) => void
    - currentTime?: number (to highlight current bookmark)
    - className?: string

    Features:
    - Display list of bookmarks sorted by timestamp
    - Each bookmark shows: timestamp (mm:ss), label, delete button
    - Click bookmark → calls onBookmarkClick(timestamp)
    - Delete button → calls videoStore.removeBookmark
    - Empty state: "No bookmarks yet. Click the bookmark icon while watching to save moments."
    - Highlight bookmark if currentTime is within 2 seconds of bookmark timestamp

    Styling:
    - Compact list design
    - Bookmark icon next to each item
    - Subtle delete button (X or Trash icon) on hover
    - Dark mode support
    - Scrollable if many bookmarks

    Use lucide-react icons: Bookmark, Trash2 or X.
  </action>
  <verify>TypeScript compiles, bookmarks display and are deletable</verify>
  <done>VideoBookmarks shows all bookmarks, allows navigation and deletion</done>
</task>

<task type="auto">
  <name>Task 3: Update video component exports</name>
  <files>frontend/src/components/video/index.ts</files>
  <action>
    Update `frontend/src/components/video/index.ts` to export:
    - InteractiveVideoPlayer (from 02-01)
    - VideoChapters (from 02-01)
    - VideoControls (from 02-01)
    - VideoBookmarks
    - BookmarkButton

    Ensure clean barrel exports following project patterns.
  </action>
  <verify>All exports work, no circular dependencies</verify>
  <done>All video components exported from index.ts</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds
- [ ] No TypeScript errors
- [ ] BookmarkButton adds bookmark to store
- [ ] VideoBookmarks displays bookmarks from store
- [ ] Bookmark click triggers onBookmarkClick callback
- [ ] Bookmark deletion works
- [ ] All components exported from index.ts
</verification>

<success_criteria>
- All tasks completed
- All verification checks pass
- No errors or warnings introduced
- Bookmarks persist to localStorage via videoStore
- Users can add, view, click, and delete bookmarks
</success_criteria>

<output>
After completion, create `.planning/phases/02-interactive-content/02-02-SUMMARY.md`
</output>
